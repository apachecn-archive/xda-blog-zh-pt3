<html>
<head>
<title>How to Completely Take Control of Ambient EQ on the Google Pixel 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在谷歌Pixel 4上完全控制环境均衡器</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/google-pixel-4-ambient-eq-tweak/#0001-01-01">https://www.xda-developers.com/google-pixel-4-ambient-eq-tweak/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p class="translated">当谷歌上个月宣布Pixel 4时，我最兴奋尝试的功能之一<a href="https://www.xda-developers.com/google-pixel-4-automatic-white-balance-true-tone/">是Ambient EQ。Ambient EQ就是谷歌所说的自动白平衡调整功能。使用一个能够测量环境照明色温的传感器(</a><a href="https://ams.com/tmd3702vc"> TMD3702VC </a>)，Ambient EQ“根据周围的光线水平动态调整显示器[白平衡]。”遗憾的是，Pixel 4 <em>上的环境均衡器几乎没有调整显示器的色温，导致我感觉这是一个令人印象深刻的体验。</em></p>

  <div class="body-img landscape"><div class="responsive-img image-expandable img-article-item" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Ambient EQ toggle in Display settings on the Google Pixel 4&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="1500px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg?q=50&amp;fit=crop&amp;w=1500&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="943px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg?q=50&amp;fit=crop&amp;w=943&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="767px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg?q=50&amp;fit=crop&amp;w=767&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="480px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg?q=50&amp;fit=crop&amp;w=480&amp;dpr=1.5"/> <img class="lazyload" alt="" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg" src="../Images/becc00010130ed3d775fb93051b1a493.png" data-original-src="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/11/Pixel-4-Display-Settings-1024x385.jpg"/> </picture> <figcaption class="body-img-caption">Ambient EQ toggle in Display settings on the Google Pixel 4</figcaption> </figure> </div>


 </div>


<p class="translated">XDA显示器分析师Dylan Raga 称，将这一功能放在首位的原因是因为“显示器的感知白平衡会随着你周围环境照明的颜色而变化”。例如，“在温暖的光线下观看时，屏幕经常显得过于蓝。”为了“不管环境照明的颜色如何，都使屏幕看起来一致”，智能手机“应该朝着环境照明的颜色改变[它们的显示器]色温。”</p>

<p class="translated">谷歌的第一款具有自动白平衡调整功能的产品是Nest Hub，该功能也被称为环境均衡器。在Nest Hub上，Ambient EQ简直不可思议。无论当前的照明条件如何，在Nest Hub显示器上查看图像就像是在查看打印的照片。你不会在Pixel 4上获得这种环境均衡器的体验，公平地说，这是有意义的，因为智能手机不仅仅用于查看图像。</p>





<p/><p class="translated"><em>不同光照条件下的Google Nest Hub。环境均衡器与设备上的“自动亮度”设置相关联。在这里捕捉效果有点困难——你真的需要自己去看。</em></p>

<p class="translated">然而，Pixel 4远不是唯一一款具有自动白平衡调节功能的移动设备，这意味着我们可以比较其他科技公司是如何实现这一功能的。苹果和三星都有类似的功能，尽管由于更好的营销，苹果的真实语气更为人所知。从我在Reddit等在线论坛上看到的大量投诉来看，并不是每个人都喜欢启用True Tone的iPhone显示屏看起来有多黄。这就是为什么我认为谷歌限制了低环境EQ可以调整Pixel 4上的白点的程度——他们希望效果微妙，颜色更准确，所以人们不会关闭它。这也可能是iPhone默认禁用True Tone而Pixel 4默认启用Ambient EQ的原因。</p>

<p>虽然谷歌的目标是取悦所有人，但我认为谷歌在Pixel 4上选择环境均衡器的范围有点太保守了。我个人非常喜欢True Tone在iPhone和iPad上的外观，所以我很失望地得知Pixel 4的白点平均值从最低6300K到最高7450K不等，分别对应于5300K和8000K的环境色温。在这些默认设置下，与iPhone或iPad相比，我几乎没有注意到显示屏的变化。相比之下，根据<a href="https://www.anandtech.com/show/10265/understanding-the-97-ipad-pros-true-tone-display"> <em> AnandTech </em> </a>的测量，2016款9.7英寸苹果iPad Pro在3000K的环境照明下可以降至5388K。</p>

 
<h2 id="tweaking-ambient-eq-on-the-pixel-4">调整像素4的环境均衡器</h2>
<p>在我认为我比谷歌知道得更多的评论开始满天飞之前，我想解释一下为什么我认为调整环境情商是值得的。谈到显示质量，人们的品味各不相同。有些人喜欢暖色，而有些人喜欢冷色。一些人希望他们的显示器总是色彩准确，而另一些人更关心舒适度。像Pixel 4的所有其他功能一样，谷歌设计了Ambient EQ来吸引大多数用户。然而，如果你想玩玩这个特性，得到你认为对你来说更好看的东西<em/><em/>，那么这就是我在这里告诉你怎么做的。</p>

<p>是的，<a href="https://www.xda-developers.com/tag/google-pixel4/">正如Pixel 4 </a>上的许多功能一样，如果<a href="https://www.xda-developers.com/google-pixel-4-root-magisk/">您拥有root访问权限</a>，则可以在Pixel 4上调整环境均衡器。我已经使用自定义参数一个多星期了，我觉得它不仅使在温暖的环境照明下阅读文本更加愉快，而且还减少了眼睛疲劳。<strong>Pixel 4已经成为我使用最舒适的智能手机。在我向你展示如何调整环境均衡器之前，你需要了解它的参数是如何控制的。</strong></p>

<div class="table-container"><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th><p>环境色温</p> </th><th><p>显示色温</p> </th><th><p>降低/提高阈值</p> </th> </tr></thead><tbody><tr><td><p>5300</p> </td><td><p>6300</p> </td><td><p>0.007874</p> </td> </tr><tr><td><p>6000</p> </td><td><p>6400</p> </td><td><p>0.0075472</p> </td> </tr><tr><td><p>7000</p> </td><td><p>6850</p> </td><td><p>0.006993</p> </td> </tr><tr><td><p>8000</p> </td><td><p>7450</p> </td><td><p>0.0067114</p> </td> </tr></tbody> </table> </div>
<p/><p><em>储存Pixel 4和Pixel 4 XL上的环境均衡器参数。</em></p>

<p>上表显示了像素4上环境均衡器的最重要参数。前两列示出了相对于环境色温(列#1)的像素4的基本显示色温(列#2)。使用涉及减小/增大阈值以及一些其他参数的计算，像素4可以将其显示色温调节到最小值(6300K)和最大值(7450K)之间的任何值。如果你对如何计算这些中间值感兴趣，我推荐<a href="https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/values/config.xml">阅读AOSP </a>中每个设置的描述。搜索“config_displayWhiteBalance”以找到所有相关的环境均衡器参数及其描述。</p>

<p>有了这些知识，我调整了Ambient EQ，使用已知的Apple True Tone值(感谢<em> Anandtech </em>)和stock Pixel 4值的混合来创建以下更改:</p>

<div class="table-container"><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th><p>环境色温</p> </th><th><p>显示色温</p> </th><th><p>降低/提高阈值</p> </th> </tr></thead><tbody><tr><td><p>3000</p> </td><td><p>5388</p> </td><td><p>0.008</p> </td> </tr><tr><td><p>5000</p> </td><td><p>6404</p> </td><td><p>0.0076981</p> </td> </tr><tr><td><p>6000</p> </td><td><p>6700</p> </td><td><p>0.0075472</p> </td> </tr><tr><td><p>7000</p> </td><td><p>6850</p> </td><td><p>0.006993</p> </td> </tr><tr><td><p>8000</p> </td><td><p>7450</p> </td><td><p>0.0067114</p> </td> </tr></tbody> </table> </div>
<p/><p><em>在我的Pixel 4上自定义环境均衡器参数。</em></p>

<p>这些价值观完美吗？不，当然不是——质量是主观的。我个人更喜欢Pixel 4在这些值下的样子吗？你打赌。如果我能得到真实色调环境/显示颜色值的完整列表，我会扩展我的调整以更好地匹配iPhone。如果我有更好的显示设备，我可以创建一组值，使Pixel 4在所有环境照明条件下都显示准确的颜色。如果我愿意，我可以扩大环境均衡器的色彩范围，使它完全取代夜间照明。只需要一点点的尝试和错误，这就是为什么我要与社区分享我所学到的东西。</p>

<p>这是我制作的一个Magisk模块，上面的表格中包含了自定义的环境均衡器值。只需从下面的链接下载并在Magisk管理器中安装该模块。</p>

<p/><p><strong> <a href="https://www.androidfilehost.com/?fid=4349826312261626370">下载AmbientEQTweak Magisk模块</a> </strong></p>

<p>如果您对自定环境均衡器感兴趣，您需要执行以下操作:</p>

<ol> <li>创建一个针对android框架(包名:“Android”)的运行时资源覆盖(RRO)。<a href="https://hastebin.com/eguzabufos.xml">这是我的覆盖图中的AndroidManifest.xml。</a>  <ul> <li>使用所需的自定义参数创建arrays.xml。例如，config _ displaywhitebalanceambientcoltemperatures是对应于上表中列#1的整数数组，而config _ displaywhitebalancebasesholds和config _ displayWhiteBalanceDisplayColorTemperatures对应于上表中列#2。请注意，config _ displayWhiteBalanceDecreaseThresholds和config _ displayWhiteBalanceIncreaseThresholds的长度必须与config _ displaywhitebalancebasesholds的长度相同。<a href="https://hastebin.com/olafebepet.xml">这是我在叠加中使用的arrays.xml。</a></li> <li>如果您想要一个新的最小或最大显示色温，请创建一个integers.xml文件。在config _ displayWhiteBalanceColorTemperatureMin中设置最小值，在config _ displayWhiteBalanceColorTemperatureMax中设置最大值。<a href="https://hastebin.com/exidabozug.xml">这是我在叠加中使用的integers.xml。</a></li> <li>如果您想要更改环境光均衡器在低光照条件下偏向的色温，请创建一个dimens.xml。这是通过更改config _ displaywhitebalancelowlightambientcolortempty的值来实现的。请注意，低光阈值是数组config _ displaywhitebalancelowlightambient brightness中的lux值范围，它可以在arrays.xml中被覆盖。(我用10覆盖了默认的10-50范围，因此当环境亮度低于10 lux时，像素4将下降到5388K。)<a href="https://hastebin.com/pinekivoqa.xml">这是我在覆盖图</a>中使用的dimens.xml。</li> </ul> </li> <li>编译并签名您的覆盖包，并创建一个Magisk模块将这个覆盖放在/vendor/overlay中。</li> </ol>

<p>你可以使用<a href="https://github.com/substratum/template">底层</a>和<a href="https://github.com/topjohnwu/magisk-module-installer"> Magisk模块</a>模板，或者你可以提取我的Magisk模块并反编译我做的覆盖图作为基础。如果你想出了一套你满意的价值观，请在下面的评论中或者在XDA论坛上分享你的成果。</p>

<p/><p><strong> <a href="https://forum.xda-developers.com/pixel-4">谷歌Pixel 4论坛</a></strong>| |<strong>|<a href="https://forum.xda-developers.com/pixel-4-xl">谷歌Pixel 4 XL论坛</a> </strong></p>

<p>最后，如果您想走试错路线，我建议使用以下两个adb shell命令:</p>

<ul> <li><code>adb shell dumpsys color_display</code> -使用此按钮查看您的最小和最大色温覆盖是否有效，并查看当前显示色温的设置。</li> <li><code>adb shell dumpsys display</code> -查找“AmbientColorTemperatureSensor”输出，查看TMD3702VC颜色传感器报告的当前环境色温。事件历史记录列出了记录的环境色温和记录该值的时间(以Unix纪元毫秒为单位)。</li> </ul>
</div>


</div>    
</body>
</html>