<html>
<head>
<title>Android 14 has built-in support for Google and Samsung’s Health Connect platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android 14内置了对谷歌和三星健康连接平台的支持</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-14-health-connect-built-in/#0001-01-01">https://www.xda-developers.com/android-14-health-connect-built-in/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p class="translated">如果你真的想减肥、健身或注意饮食，那么你的智能手机可以成为你健康和健身武库中一个无价的工具。然而，许多人发现一个应用程序不足以跟踪他们需要的一切。然而，使用多个健康和健身应用程序可能是一件痛苦的事情，因为它们之间的互联性可能不存在或非常有限。为了解决这个问题，谷歌和三星合作开发了一个名为<a href="https://www.xda-developers.com/health-connect/"> Health Connect </a>的平台，它可以成为所有运行<a href="https://www.xda-developers.com/android-14/"> Android 14 </a>的设备的开箱即用体验的一部分。</p>

  
<p class="translated">谷歌在去年的I/O 2022上宣布了健康连接<a href="https://www.xda-developers.com/google-samsung-health-connect-api/">。这是一个让应用程序更容易分享健康和健身数据的平台。它标准化了应用程序记录健康和健身数据的方式，因此开发人员无需为他们想要同步数据的每个服务编写不同的集成代码。Health Connect平台由两部分组成:开发人员调用的API和允许用户管理其数据并控制哪些服务可以访问该数据的应用程序。</a></p>

<p class="translated">Health Connect应用程序是该平台的重要组成部分。毕竟，它实际上负责安全地存储和管理用户的健康和健身数据，其他应用程序通过API利用这些数据。如果没有该应用程序，其他应用程序就无法同步数据。幸运的是，健康连接应用程序只需轻点几下，就可以安装在任何运行Android 9或更高版本、带有Google Play服务的设备上。</p>

 
<p class="w-rich w-play_store_app" id="com.google.android.apps.healthdata">
 </p>


<p class="translated">幸运的是，安装Health Connect需要点击几下，这立即限制了它的覆盖范围，因为用户必须知道它的存在，才能去下载它。Health Connect的用户基础有限(该应用程序已在100万至500万台设备上下载),这意味着一些开发人员可能看不到支持该平台的价值，尽管幸运的是，谷歌与许多公司密切合作，在推出之前增加了支持。尽管如此，如果有更多的用户了解它，对该平台的长期健康会更好。</p>

<p class="translated">一种解决方案是将Health Connect植入操作系统，这样它就可以在所有Android设备上使用，这正是谷歌在Android 14中可能会做的事情。Android 14 DP1附带了一个新的APEX文件，包名为com。如果你还记得的话，【谷歌】. android.healthconnect. APEX是<a href="https://blog.esper.io/what-is-project-mainline/#the-structure-of-apex-packages" rel="noopener noreferrer" target="_blank">一种android特有的文件格式</a>，用于<a href="https://www.xda-developers.com/android-project-mainline-modules-explanation/">项目主线</a>。项目主线将系统组件模块化为APK或APEX格式，以便它们可以通过Google Play进行更新，这是一种更新交付机制，您可能听说过称为“Google Play系统更新”</p>





<p class="translated">Health Connect APEX中有一个版本的Health Connect应用程序，它具有不同的包名(com。而不是通过Google Play(com . Google . Android . apps . health data)获得。不同的包名称在这里是有意义的，因为Android不允许你安装与已经安装的应用程序具有相同包名称的应用程序，并且许多升级到Android 14的用户将已经从Google Play安装了Health Connect。</p>

<p class="translated">对于那些已经安装了Google Play版本的应用程序并填充了数据的用户，Android 14可能会让他们将数据迁移到系统版本。拥有新的MIGRATE_HEALTH_CONNECT_DATA权限的应用程序将能够将数据从Google Play版本的Health Connect迁移到系统版本。MIGRATE_HEALTH_CONNECT_DATA的保护级别为“knownSigner|signature”，因此它只能授予使用平台证书签名的应用程序或使用数组“config _ healthconmigrationknownsigners”中定义的<a href="https://developer.android.com/guide/topics/permissions/defining#grant-signature-permissions" rel="noopener noreferrer" target="_blank">已知签名证书</a>签名的应用程序</p>

<p class="translated">健康连接的系统版本具有不同的包名称的一个缺点是应用程序需要更新才能知道它。目前，使用Health Connect API <a href="https://developer.android.com/guide/health-and-fitness/health-connect/get-started#step_2_get_health_connect_client" rel="noopener noreferrer" target="_blank">的应用程序会检查</a>是否安装了Play Store版本的应用程序，但如果没有安装该版本的应用程序，就不再适合假设该API不可用。然而，谷歌可能会更新<a href="https://developer.android.com/jetpack/androidx/releases/health-connect" rel="noopener noreferrer" target="_blank">健康连接支持库</a>，这样开发者就不必担心弄清楚安装的是哪个版本的应用程序。健康连接意图动作，例如，<a href="https://android-review.googlesource.com/c/platform/frameworks/support/+/2417359" rel="noopener noreferrer" target="_blank">正在被更新</a>以打开安装在设备上的健康连接的正确版本的设置。</p>

<p class="translated">鉴于我们目前所知的情况，有理由认为健康连接将成为Android 14中一个新的项目主线模块。如果是这样，这意味着谷歌将能够通过Play系统更新直接向其推送更新，前提是OEM厂商必须分发谷歌的签名版本。即使它们不是，但它现在在APEX文件中的事实应该意味着，除非它在Android 14发布前被废弃，否则它的源代码将在AOSP发布时公开。事实上，一个名为“<a href="https://android.googlesource.com/platform/packages/modules/HealthFitness/" rel="noopener noreferrer" target="_blank"> HealthFitness </a>”的新存储库已经在AOSP的Android/platform/packages/modules位置下出现，这表明这确实会发生。</p>

 </div>


</div>    
</body>
</html>